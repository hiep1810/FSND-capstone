# Use the `python:3.7` as a source image from the Amazon ECR Public Gallery
# We are not using `python:3.7.2-slim` from Dockerhub because it has put a  pull rate limit. 
FROM public.ecr.aws/sam/build-python3.7:latest



ENV DATABASE_USERNAME=filmography_user
ENV DATABASE_PASSWORD=UCV3WdP6xoBl52KQ3neT0GSMGSeqCYpk
ENV DATABASE_HOST=dpg-cm83kngcmk4c739067p0-a.oregon-postgres.render.com
ENV DATABASE_PORT=5432
ENV DATABASE_NAME=filmography

ENV AUTH0_DOMAIN='dev-nf4n45ptn3bgpffq.us.auth0.com'
ENV ALGORITHMS=['RS256']
ENV API_AUDIENCE='movie'
ENV FLASK_APP=api.py

ENV CASTING_ASSISTANT_TOKEN=eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6InhMdE5ZQU5nSkl5eGlCaUJuU2pZZiJ9.eyJpc3MiOiJodHRwczovL2Rldi1uZjRuNDVwdG4zYmdwZmZxLnVzLmF1dGgwLmNvbS8iLCJzdWIiOiJhdXRoMHw2NThjNDA2NGNjMDIyNmQ0YWY5MjcxYTciLCJhdWQiOiJtb3ZpZSIsImlhdCI6MTcwMzk0OTk3NywiZXhwIjoxNzAzOTU3MTc3LCJhenAiOiJXRFhETzhmRTdhUzd5Z1dPd0d5eG1MWHlsczRXeWtoYyIsInNjb3BlIjoiIiwicGVybWlzc2lvbnMiOlsiZ2V0OmFjdG9ycyIsImdldDptb3ZpZXMiXX0.gdME3WSBx2SDyc1mscFWnOJ5s-kzv2yoozCc0BALs2q_RRw1kWdVguv8oqfrDANLU7Fm-yTxfo3VbYWQBfWelpZ66rpEDO0h0OVGnN1NvEKxOHtqEmXSutz-xBJFXgD49GWokJUEoVK3DB6flA4XE3cpaUq1NupVR6KMXwrtfmw6UoB_XqgNMC_xwl8QypRiYXbWP5p3J4aedoovgleqT3CjNkUJKn87CTTYuua9b7Fm190czGqk2K2_ccKIpDK67Q3sNf8KNrU67v6OKPQ4Cy-FWh9Y9UDItUWLgXUkKXL9D1j5WUlqkaQtQwTov1EPMq0PAD2Y9BN9-yQiMzyBtQ
ENV CASTING_DIRECTOR_TOKEN=eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6InhMdE5ZQU5nSkl5eGlCaUJuU2pZZiJ9.eyJpc3MiOiJodHRwczovL2Rldi1uZjRuNDVwdG4zYmdwZmZxLnVzLmF1dGgwLmNvbS8iLCJzdWIiOiJhdXRoMHw2NTc1NGEyMDlmYTk3ZTEzZWZjZTJlZmUiLCJhdWQiOiJtb3ZpZSIsImlhdCI6MTcwMzk0OTg5NSwiZXhwIjoxNzAzOTU3MDk1LCJhenAiOiJXRFhETzhmRTdhUzd5Z1dPd0d5eG1MWHlsczRXeWtoYyIsInNjb3BlIjoiIiwicGVybWlzc2lvbnMiOlsiZGVsZXRlOmFjdG9ycyIsImdldDphY3RvcnMiLCJnZXQ6bW92aWVzIiwicGF0Y2g6YWN0b3JzIiwicGF0Y2g6bW92aWVzIiwicG9zdDphY3RvcnMiXX0.NsclDTPhJXE9GcFObrBn74H_IY1z6nl8_ilpqhE4jKMbHFSogVc38NLbSev7LBUxTtsRfb9plYvE8rjoli_lRBsRRDcciGgxHuOfcnJILv-wBXsJ1y5iJSzUs7J5y50ZpwvTMFHd2hjxU0Eng_6aouDpVHsVYcm_bUiQ7QYJ7HtFChrAvK_zF-eb2mVgwJEpyXiihVL4Mte9C3PcIGkwxLBfk9SePMpEwYPHFJyh5U6ONEzebQFMFmZIxbLVv-ciNMtkVatDckIiZuiCE5sVl-O0OFJJtAOt_6EllnRAa_4Equxcr6KeINBDuHYCYy4hwc_rsaOD4kaxX0IMn-GA0w
ENV EXECUTIVE_PRODUCER_TOKEN=eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6InhMdE5ZQU5nSkl5eGlCaUJuU2pZZiJ9.eyJpc3MiOiJodHRwczovL2Rldi1uZjRuNDVwdG4zYmdwZmZxLnVzLmF1dGgwLmNvbS8iLCJzdWIiOiJnb29nbGUtb2F1dGgyfDEwMTM1MjU5OTUzODMxMTYwMzkyNSIsImF1ZCI6Im1vdmllIiwiaWF0IjoxNzAzOTUwMDI1LCJleHAiOjE3MDM5NTcyMjUsImF6cCI6IldEWERPOGZFN2FTN3lnV093R3l4bUxYeWxzNFd5a2hjIiwic2NvcGUiOiIiLCJwZXJtaXNzaW9ucyI6WyJkZWxldGU6YWN0b3JzIiwiZGVsZXRlOm1vdmllcyIsImdldDphY3RvcnMiLCJnZXQ6bW92aWVzIiwicGF0Y2g6YWN0b3JzIiwicGF0Y2g6bW92aWVzIiwicG9zdDphY3RvcnMiLCJwb3N0Om1vdmllcyJdfQ.HYPHmIBBHMllFfLSv0iNR0Nre6wdo8r8KWAweSIRBi6UTlOJYya1TC77VqO3Gpkf9z5vA8Q4J5VoduSVpQ4bbQ05hGEWXimbG0iTSSE_4R2oe6010pxQK9QnTiEM4clK7BEe-RQoxI0EnBBJ97e5wce2gLJ2d1g1hsGwMSdeDUM7fvDpZZTEq0PW3u30lLfbEint6Cmmirpv-rgQ7wGzNyWzpROkbi2svxM3OI9C6JnsMljAvMOd9XSJVhP78vC6YcbPvurv3rwU0yi_btEO3idaR29nWcLU-QrP52ijbp_nNEMWPp0wDL1S5l36kPg2lGxsF-u__Pgih-EIgDJoow



# By default, listen on port 5000
EXPOSE 5000/tcp

# Set up an app directory for your code
COPY . /app
WORKDIR /app

# Install `pip` and needed Python packages from `requirements.txt`
RUN pip install --upgrade pip
RUN pip install -r requirements.txt

# Define an entrypoint which will run the main app using the Gunicorn WSGI server.
ENTRYPOINT ["gunicorn", "-b", ":5000", "api:app"]
